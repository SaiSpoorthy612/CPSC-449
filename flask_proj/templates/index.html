<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Management</title>
</head>
<style>
    
</style>
<body>
    <h1>Contact Management</h1>
    
   
    <h2>Add Contact</h2>
    <form action="/add_contact" method="post">
        <label for="CID">CID:</label>
        <input type="text" id="CID" name="CID" required><br><br>
        
        <label for="FirstName">First Name:</label>
        <input type="text" id="FirstName" name="FirstName" required><br><br>
        
        <label for="LastName">Last Name:</label>
        <input type="text" id="LastName" name="LastName" required><br><br>

        <label for="Address">Address:</label>
        <input type="text" id="Address" name="Address" required><br><br>

        <label for="City">City:</label>
        <input type="text" id="City" name="City" required><br><br>

        <label for="State">State:</label>
        <input type="text" id="State" name="State" required><br><br>

        <label for="Zip">Zip:</label>
        <input type="text" id="Zip" name="Zip" required><br><br>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required><br><br>
        
        <input type="submit" value="Add Contact">
    </form>
    
    
    <h2>Delete Contact</h2>
    <form id="deleteForm" action="/delete_contact" method="post">
        <label for="delFirstName">First Name:</label>
        <input type="text" id="delFirstName" name="delFirstName" required><br><br>
        
        <label for="delLastName">Last Name:</label>
        <input type="text" id="delLastName" name="delLastName" required><br><br>
        
        <input type="submit" value="Delete Contact">
    </form>

   
    <h2>Update Contact</h2>
   
    
    <form id="updateForm" action="/update_contact" method="put">
        <label for="CID">Contact ID (CID):</label>
        <input type="text" id="CID" name="CID" required><br><br>
        
        <label for="newFirstName">New First Name:</label>
        <input type="text" id="newFirstName" name="FirstName" required><br><br>
        
        <label for="newLastName">New Last Name:</label>
        <input type="text" id="newLastName" name="LastName" required><br><br>
        
        <input type="submit" value="Update Names">
    </form>
   
    <h2>View Contacts</h2>
    <a href="{{ url_for('view_contacts') }}">View Contacts</a>

    <script>
        document.getElementById('updateForm').addEventListener('submit', function(e) {
            e.preventDefault(); 
            var formData = new FormData(this); 
            fetch('/update_contact', {
                method: 'PUT',
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    alert('First Name and Last Name updated successfully.');
                    window.location.reload();
                } else {
                    throw new Error('Failed to update First Name and Last Name');
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    </script>

    <!-- Script for Deleting Contact -->
    <script>
        document.getElementById('deleteForm').addEventListener('submit', function(e) {
            e.preventDefault(); 
            var formData = new FormData(this); 
            fetch('/delete_contact', {
                method: 'DELETE',
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    window.location.reload();
                } else {
                    throw new Error('Failed to delete contact');
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    </script>
</body>
</html>
